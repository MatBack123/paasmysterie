<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Volgende Uitdaging, Detective Jesse</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: "Raleway", sans-serif;
        background-color: #f0f8f4;
        color: #2c2c2c;
      }

      header {
        background-color: #43a047;
        color: white;
        padding: 2rem 1rem;
        text-align: center;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        border-bottom: 5px solid #388e3c;
      }

      header h1 {
        font-size: 2rem;
        font-weight: 600;
        margin: 0;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
        word-wrap: break-word;
      }

      .emoji {
        font-size: 1.2rem;
        vertical-align: middle;
      }

      .container {
        max-width: 1000px;
        margin: auto;
        padding: 2rem 1rem;
      }

      .riddle-box {
        background-color: #fff9c4;
        border-left: 6px solid #43a047;
        border-radius: 8px;
        padding: 20px 25px;
        margin-top: 20px;
        font-style: italic;
        font-size: 1rem;
        display: none;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(60px, 30vw));
        grid-template-rows: repeat(4, minmax(60px, 30vw));
        gap: 1px;
        justify-content: center;
        margin-top: 20px;
      }

      .grid div {
        border: 1px solid #ccc;
        background-image: url("slide.jpg");
        background-size: 90vw 120vw;
        background-repeat: no-repeat;
        cursor: pointer;
        user-select: none;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      button {
        background-color: #43a047;
        color: white;
        border: none;
        padding: 0.6rem 1rem;
        font-size: 1rem;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 15px;
      }

      button:hover {
        background-color: #388e3c;
      }

      #hint-text {
        display: none;
        background-color: #f9fbe7;
        padding: 1rem;
        border-radius: 10px;
        margin-top: 10px;
        font-style: italic;
        font-size: 1rem;
      }

      footer {
        text-align: center;
        padding: 1rem;
        color: #777;
        font-size: 0.9rem;
        margin-top: 40px;
      }

      @media (min-width: 700px) {
        .grid {
          grid-template-columns: repeat(3, 120px);
          grid-template-rows: repeat(4, 120px);
        }

        .grid div {
          width: 120px;
          height: 120px;
          background-size: 360px 480px;
        }

        header h1 {
          font-size: 2.5rem;
        }

        .emoji {
          font-size: 1.5rem;
        }

        .riddle-box {
          font-size: 1.1rem;
        }

        #hint-text {
          font-size: 1.05rem;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <span class="emoji">üïµÔ∏è‚Äç‚ôÇÔ∏è</span> Volgende Uitdaging, Detective Jesse
        <span class="emoji">üß©</span>
      </h1>
    </header>

    <div class="container">
      <p>Goed gedaan, detective!</p>
      <p>De Schaduwpoot heeft zijn volgende aanwijzing goed verstopt...</p>

      <div id="board" class="grid"></div>

      <div class="riddle-box" id="completed-message">
        <p>
          üéØ Goed gedaan, Jesse!<br /><br />
          Maar‚Ä¶ de Schaduwpoot is je n√©t ontsnapt! üïµÔ∏è‚Äç‚ôÇÔ∏èüí®<br />
          Gelukkig liet hij haastig iets achter...
        </p>
        <button onclick="showHint()">Bekijk Hint</button>
        <div id="hint-text">
          <p>Psst... kijk onder de glijbaan üõù</p>
        </div>
      </div>

      <footer>
        <span class="emoji">üê£</span> Kun jij het volgende paasei vinden...?
      </footer>
    </div>

    <script>
      const columns = 3;
      const totalPieces = 12;
      let pieces = [];

      function generatePieces() {
        pieces = Array.from({ length: totalPieces }, (_, index) => index);
        shuffleArray(pieces);
        renderGrid();
      }

      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      function renderGrid() {
        const grid = document.getElementById("board");
        grid.innerHTML = "";
        pieces.forEach((piece, index) => {
          const div = document.createElement("div");
          const col = piece % columns;
          const row = Math.floor(piece / columns);
          const isLargeScreen = window.innerWidth >= 700;

          if (isLargeScreen) {
            div.style.backgroundPosition = `${-col * 120}px ${-row * 120}px`;
          } else {
            div.style.backgroundPosition = `${-col * 30}vw ${-row * 30}vw`;
          }

          div.setAttribute("data-index", index);
          div.setAttribute("draggable", true);
          div.addEventListener("dragstart", handleDragStart);
          div.addEventListener("dragover", handleDragOver);
          div.addEventListener("dragenter", handleDragEnter);
          div.addEventListener("drop", handleDrop);
          div.addEventListener("dragend", handleDragEnd);
          grid.appendChild(div);
        });
      }

      function handleDragStart(event) {
        draggedPiece = event.target;
        event.dataTransfer.setData(
          "text",
          draggedPiece.getAttribute("data-index")
        );
      }

      function handleDragOver(event) {
        event.preventDefault();
      }

      function handleDragEnter(event) {
        event.preventDefault();
      }

      function handleDrop(event) {
        event.preventDefault();
        const draggedIndex = parseInt(event.dataTransfer.getData("text"));
        const targetIndex = parseInt(event.target.getAttribute("data-index"));

        if (draggedIndex !== targetIndex) {
          [pieces[draggedIndex], pieces[targetIndex]] = [
            pieces[targetIndex],
            pieces[draggedIndex],
          ];
          renderGrid();
        }

        if (pieces.every((val, idx) => val === idx)) {
          document.getElementById("completed-message").style.display = "block";
        }
      }

      function handleDragEnd() {
        draggedPiece = null;
      }

      function showHint() {
        document.getElementById("hint-text").style.display = "block";
      }

      window.onload = generatePieces;
      window.onresize = renderGrid;
    </script>
  </body>
</html>
